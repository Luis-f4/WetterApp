let player; 
let jumpForce = 0;
let movement = 0;
let ground;
let platform1, platform2, platform3;
let coin;
let platform3Direction = 1;

function setup() {
    createCanvas(1250, 540);
    player = createVector(width / 2, height - 50);
    platform1 = createVector(200, 430);
    platform2 = createVector(500, 350);
    platform3 = createVector(800, 250);
    coin = createVector(1150, 160);
    ground = height - 50;
}

function draw() {
    background('DeepSkyBlue');
    rectMode(CENTER);

    // Spieler malen
    fill('white');
    rect(player.x, player.y, 50, 50);

    // Plattformen malen
    drawPlatforms();

    // M端nze malen
    fill('yellow');
    ellipse(coin.x, coin.y, 30, 30);

    // Spieler Position updaten
    player.y += jumpForce;
    player.x += movement;

    // Plattform 3 Bewegung
    platform3.x += platform3Direction * 2;
    if (platform3.x >= width - 75 || platform3.x <= 75) {
        platform3Direction *= -1;
    }

    // Ber端hrung mit dem Boden checken
    if (player.y >= ground) {
        jumpForce = 0;
        player.y = ground;
    } 
    // Ber端hrung mit Plattformen checken
    else if (
        (player.x + 25 >= platform1.x - 75 &&
        player.x - 25 <= platform1.x + 75 &&
        player.y + 25 >= platform1.y - 10 &&
        player.y + 25 <= platform1.y + 10) ||

        (player.x + 25 >= platform2.x - 75 &&
        player.x - 25 <= platform2.x + 75 &&
        player.y + 25 >= platform2.y - 10 &&
        player.y + 25 <= platform2.y + 10) ||

        (player.x + 25 >= platform3.x - 75 &&
        player.x - 25 <= platform3.x + 75 &&
        player.y + 25 >= platform3.y - 10 &&
        player.y + 25 <= platform3.y + 10)
    ) {
        jumpForce = 0;
        player.y -= 0.5; 
    } 
    // Gravity
    else {
        jumpForce += 0.5;
    }

    // Springen
    if (keyIsDown(32) && (player.y >= ground || Math.abs(player.y - platform1.y + 35) < 1 || Math.abs(player.y - platform2.y + 35) < 1 || Math.abs(player.y - platform3.y + 35) < 1)) {
        jumpForce = -12;
    }

    // Spieler nach Links und rechts bewegen
    if (keyIsDown(LEFT_ARROW)) {
        movement = -8;
    } else if (keyIsDown(RIGHT_ARROW)) {
        movement = 8;
    } else {
        movement = 0;
    }
}

// Hier mit den Sch端lern arbeiten
function drawPlatforms(){
    fill('green');
    rect(platform1.x, platform1.y, 150, 20);
    rect(platform2.x, platform2.y, 150, 20);
    rect(platform3.x, platform3.y, 150, 20);
}
