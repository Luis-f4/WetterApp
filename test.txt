@CrossOrigin(origins = "http://localhost:3000")
@PutMapping(path = "/updateEmployee/{licensingID}/{email}/{department}/{company}/{subscriptionPack}/{po}/{amount}")
public @ResponseBody String editEmployeeNew(@PathVariable int licensingID, @PathVariable String email, 
                                            @PathVariable String department, @PathVariable String company, 
                                            @PathVariable String subscriptionPack, @PathVariable String po, 
                                            @PathVariable int amount) {

    // Find the Licensing entry by licensingID
    Licensing licensing = licensingRepo.findById(licensingID).orElse(null);

    // Extract Employee associated with this Licensing
    EmployeeEntity employee = (licensing != null) ? licensing.getEmployee() : null;

    // Find the License based on subscriptionPack, po, and amount
    Optional<LicenseEntity> licenseOpt = licenseRepo.searchLicense(subscriptionPack, po, amount);

    // Update Employee details if Employee exists
    if (employee != null) {
        employee.setDepartment(department);
        employee.setCompany(company);
        employee.setEmail(email);
        employeeRepo.save(employee);
        System.out.println("Employee with email " + email + " found and updated.");
    } else {
        System.out.println("Employee with email " + email + " not found.");
        return "Employee not found!";
    }

    // If Licensing exists, update the license association
    if (licensing != null) {
        licensing.setEmployee(employee);
        if (licenseOpt.isPresent()) {
            // Set the new License in the Licensing entry and update the licensing entry
            licensing.setLicense(licenseOpt.get());
            licensingRepo.updateLicense(licensingID, licenseOpt.get().getId());
            System.out.println("License updated successfully for employee with email " + email);
        } else {
            System.out.println("License not found.");
            return "License not found!";
        }
    } else {
        return "Licensing entry not found!";
    }

    return "Employee and Licensing updated successfully!";
}
